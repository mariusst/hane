<!DOCTYPE html>
<meta charset="utf-8">
<title>hane</title>
<style>
	html {
		Font-family: serif;
		Font-size: 16pt;
		Color: rgb(0, 0, 0);
		Background-color: tan;
	}
	
	h1, h2 {
                Font-family: sans-serif;
                Color: rgb(0, 0, 0);
                Border-bottom: 2px solid saddlebrown;
                Padding: 1ex 0;
        }
	
	body {
		Width: 70ex;
		Max-width: 80%;
		Padding: 3ex;
		Margin: 1ex auto;
		Line-height: 1.5em;
		Text-align: justify;
		Background-color: white;
		Box-shadow: 0.5ex 0.5ex 0.5ex saddlebrown;
	}
	pre { Overflow: auto; } code { Font-size: 0.8em; }
		
	a { Color: blue; }
	a:visited { Color: purple; }
	a:hover, a:active { Color: cyan; }
	
	#transcript { Min-height: 25em; }
	#transcript hr { Border: 1px solid saddlebrown; }
	
	footer {
                Border-top: 2px solid saddlebrown;
                Font-variant: small-caps;
                Text-align: right;
                Padding: 1ex 0;
	}
	footer #status { Float: left; }

	#transcript div {
		animation: fadeIn ease 3s;
	}
	@keyframes fadeIn {
		0% { opacity: 0; }
		100% { opacity: 1; }
	}
</style>
<meta name="viewport" content="width=device-width">
<meta name="creator" content="No Time To Play">

<h1>hane</h1>

<div role="log" id="transcript">Please enable Javascript to play.</div>

<footer role="status">
 <span id="status"></span>
 Moves:&nbsp;<span id="moves">0</span>
 <!--Score:&nbsp;<span id="score">0</span>/0-->
</footer>

<div style="Display: none;">

<div id="start" title="DE CE">
 <p><a rel="clear" href="#pas1">de ce ma aflu aici?</a></p>
</div>

<div id="pas1">
 <p><a rel='clear' href="#pas2">de ce nu plec?</a></p>
 <p><a href="#pas3">de ce nu-mi gasesc locul?</a></p>
</div>

<div id="pas2">
 <p><a rel="clear" href="#pas4">de ce acasa nu ma simt acasa?</a></p>
</div>

<div id="pas3">
<p><a rel="clear" href="#pas5">de ce nu renunt?</a></p>
</div>

<div id="pas4">
<p><a rel="clear" href="#pas6">de ce ma simt in plus?</a></p>
<p><a rel="clear" href="#pas7">de ce nu sunt apropiat de familia mea?</a></p>
</div>

<div id="pas5">
<p><a rel="clear" href="#pas8">de ce ma straduiesc atat?</a></p>
<p><a rel="clear" href="#pas9">de ce caut un raspuns?</a></p>
</div>

<div id="pas6">
<p><a rel="clear" href="#pas10">de ce sunt singur?</a></p>
</div>

<div id="pas7">
	<p><a rel="clear" href="#pas10">de ce sunt singur?</a></p>
</div>

<div id="pas8">
<p><a rel="clear" href="#pas11">de ce nu sunt productiv?</a></p>
<p><a rel="clear" href="#pas12">de ce muncesc zi de zi?</a></p>
</div>


<div id="pas9">
<p><a rel="clear" href="#pas13">de ce vreau sa continui?</a></p>
</div>

<div id="pas10">
 <p><a rel="clear" href="#pas15">de ce nu am grija de mine?</a></p>
 <p><a rel="clear" href="#pas16">de ce ma iubesc?</a></p>
 <p><a rel="clear" href="#pas17">de ce nu imi sun parintii?</a></p>
</div>

<div id="pas11">
<p><a rel="clear" href="#pas14">de ce toata lumea are asteptari?</a></p>
</div>

<div id="pas12">
	<p><a rel="clear" href='#pas14'>de ce toata lumea are asteptari?</a></p>
</div>

<div id="pas13">
	<p><a rel="clear" href="#pas14">de ce toata lumea are asteptari?</a></p>
</div>


<div id="pas15">
<p><a rel="clear" href="#pas18">de ce stagnez?</a></p>
</div>

<div id="pas16">
	<p><a rel="clear" href="#pas18">de ce stagnez?</a></p>
</div>

<div id="pas17">
	<p><a rel="clear" href="#pas18">de ce stagnez?</a></p>
</div>

<div id="pas14">
	<p><a rel="clear" href="#pas19">de ce dezamagesc?</a></p>
</div>

<div id="pas18">
	<p><a rel="clear" href='#pas20'>de ce sunt mediocru?</a></p>
</div>

<div id="pas19">
	<p><a rel="clear" href='#pas21'>de ce tine lumea la mine?</a></p>
	<p><a rel="clear" href='#pas22'>de ce ranim oameni?</a></p>
</div>

<div id="pas20">
	<p><a rel="clear" href='#pas23'>de ce nu pot fi diferit?</a></p>
	<p><a rel="clear" href='#pas24'>de ce evitam sa comunicam?</a></p>
</div>

<div id="pas23">
	<p><a rel="clear" href='#pas25'>de ce vreau sa fiu diferit?</a></p>
</div>

<div id="pas21">
	<p><a rel="clear" href='#pas26'>de ce imi pasa ce spune societatea?</a></p>
</div>

<div id="pas22">
	<p><a rel="clear" href='#pas26'>de ce imi pasa ce spune societatea?</a></p>
	<p><a rel="clear" href='#pas27'>de ce ne paraseste lumea?</a></p>
</div>

<div id="pas25">
	<p><a rel="clear" href='#pas28'>de ce nu inteleg ce simt?</a></p>
</div>

<div id="pas24">
	<p><a rel="clear" href='#pas28'>de ce nu inteleg ce simt?</a></p>
</div>

<div id="pas28">
	<p><a rel="clear" href='#pas29'>de ce vreau sa fiu inteles?</a></p>
	<p><a rel="clear" href='#pas30'>de ce ma chinui?</a></p>
</div>

<div id="pas29">
	<p><a rel="clear" href='#pas31'>de ce vreau sa apartin?</a></p>
</div>

<div id="pas30">
	<p><a rel="clear" href='#pas31'>de ce vreau sa apartin?</a></p>
</div>

<div id="pas31">
	<p><a rel="clear" href='#pas32'>de ce imi pun atatea intrebari?</a></p>
</div>

<div id="pas26">
	<p><a rel="clear" href='#pas32'>de ce imi pun atatea intrebari?</a></p>
</div>

<div id="pas27">
	<p><a rel="clear" href='#pas32'>de ce imi pun atatea intrebari?</a></p>
</div>

<div id="pas32">
	<p><a rel="clear" href='#pas33'>de ce latra cainele vecinei cand vreau sa dorm?</a></p>
	<p><a rel="clear" href='#pas34'>de ce da vecinul cu bormasina la trei dimineata?</a></p>
	<p><a rel="clear" href='#pas35'>de ce nu avem clima in tramvai?</a></p>
</div>

<div id="pas34">
	<p><a href='#pas36'>de ce nu respectam limitele altora?</a></p>
</div>

<div id="pas33">
	<p><a rel="clear" href='#pas37'>de ce tinem animale captive?</a></p>
	<p><a rel="clear" href='#pas38'>de ce mai exista circuri?</a></p>
</div>

<div id="pas35">
	<p><a rel="clear" href='#pas39'>de ce stam in tara asta?</a></p>
</div>

<div id="pas36">
	<p><a rel="clear" href='#pas40'>de ce avem atat de putin respect de oferit?</a></p>
</div>

<div id="pas37">
	<p><a rel="clear" href='#pas41'>de ce distrugem suflete?</a></p>
</div>

<div id="pas38">
	<p><a rel="clear" href='#pas41'>de ce distrugem suflete?</a></p>
</div>

<div id="pas39">
	<p><a rel="clear" href='#pas42'>de ce nu avem posibilitatea de a pleca?</a></p>
</div>

<div id="pas40">
	<p><a rel="clear" href='#pas43'>de ce suntem ateisti?</a></p>
</div>

<div id="pas41">
	<p><a rel="clear" href='#pas44'>de ce nu stiu sa cant?</a></p>
</div>

<div id="pas42">
	<p><a rel="clear" href='#pas45'>de ce presedintele statelor unite nu e niciodata o femeie?</a></p>
</div>

<div id="pas43">
	<p><a rel="clear" href='#pas46'>de ce visam?</a></p>
</div>

<div id="pas44">
	<p><a rel="clear" href='#pas46'>de ce visam?</a></p>
</div>

<div id="pas45">
	<p><a rel="clear" href='#pas46'>de ce visam?</a></p>
</div>

<div id="pas46">
	<p><a rel="clear" href='#pas47'>de ce cascam?</a></p>
	<p><a rel="clear" href='#pas48'>de ce ploaia ne face somnorosi?</a></p>
</div>

<div id="pas47">
	<p><a rel="clear" href='#pas49'>de ce uitam?</a></p>
</div>

<div id="pas48">
	<p><a rel="clear" href='#pas50'>de ce pluto nu e o planeta?</a></p>
</div>

<div id="pas49">
	<p><a rel="clear" href='#pas51'>de ce e cerul albastru?</a></p>
</div>

<div id="pas50">
	<p><a rel="clear" href='#pas52'>de ce ma simt pluto?</a></p>
</div>

<div id="pas51">
	<p><a rel="clear" href='#pas53'>de ce inca mai traiesti?</a></p>
</div>

<div id="pas52">
	<p><a rel="clear" href='#pas54'>de ce vrem sa atingem perfectiunea?</a></p>
</div>

<div id="pas53">
	<p><a rel="clear" href='#pas55'>de ce inca suntem rasisti?</a></p>
</div>

<div id="pas54">
	<p><a rel="clear" href='#pas56'>de ce nu putem toti sa ajungem genii?</a></p>
</div>

<div id="pas55">
	<p><a rel="clear" href='#pas57'>de ce exista homofobici?</a></p>
</div>

<div id="pas56">
	<p><a rel="clear" href='#pas58'>de ce crezi in dumnezeu?</a></p>
</div>

<div id="pas57">
	<p><a rel="clear" href='#pas58'>de ce crezi in dumnezeu?</a></p>
</div>

<!-- You shouldn't need to edit below this line. -->
<script>
var START = "start";
var TRANS = "transcript";
var transcript = null;

var status_line = null;
var moves_line = null;
var score_line = null;

var moves = 0;
var score = {};
var visited = {};

window.addEventListener("load", function () {
	"use strict";
	
	status_line = document.getElementById("status");
	moves_line = document.getElementById("moves");
	score_line = document.getElementById("score");
	transcript = document.getElementById(TRANS);
	var start = document.getElementById(START);
	transcript.innerHTML = "";
	advanceStory(start);
});

function advanceStory(fragment) {
	var clone = fetchFragment(fragment);
	if (status_line !== null && clone.title !== "") {
		status_line.innerText = clone.title;
		clone.removeAttribute("title");
	}
	transcript.appendChild(clone);
	clone.scrollIntoView({behavior: "smooth"});
}

function fetchFragment(fragment) {
	var clone = fragment.cloneNode(true);
	setVisited(clone);
	countScore(clone);
	runScripts(clone);
	setupLinks(clone.getElementsByTagName("a"));
	clone.removeAttribute("id"); // No duplicates in document.
	return clone;
}

function setVisited(fragment) {
	if (fragment.classList === undefined) {
		// Do nothing.
	} else if (fragment.classList.add === undefined) {
		// Do nothing.
	} else if (visited[fragment.id]) {
		fragment.classList.add("visited");
	} else {
		fragment.classList.add("unvisited");
	}
	visited[fragment.id] = true;
}

function countScore(fragment) {
	if (fragment.dataset === undefined) {
		return;
	} else if (fragment.dataset.score === undefined) {
		return;
	} else {
		score[fragment.id] = parseInt(fragment.dataset.score);
		var total = 0;
		for (var i in score)
			total += score[i];
		if (score_line !== null)
			score_line.innerText = total;
	}
}

function setupLinks(links) {
	for (var i = 0; i < links.length; i++) {
		if (links[i].rel !== "external") {
			links[i].addEventListener("click", linkCallback);
			links[i].addEventListener("keydown", linkCallback);
		}
	}
}

function clearLinks(links) {
	for (var i = 0; i < links.length; i++) {
		if (links[i].rel !== "external") {
			clearOneLink(links[i]);
			i--;
		}
	}
}

function clearOneLink(element) {
	element.outerHTML = element.innerHTML;
}

function linkCallback(event) {
	if (event.keyCode !== undefined)
		if (event.keyCode !== 13 && event.keyCode !== 32)
			return;
	event.preventDefault();
	var target_id = this.hash.slice(1);
	var target = document.getElementById(target_id);
	if (target === null) {
		alert("Broken link!");
		return;
	}
	if (this.rel === "clear") {
		transcript.innerHTML = "";
	} else if (this.rel === "continue") {
		clearLinks(transcript.getElementsByTagName("a"));
		transcript.appendChild(document.createElement("hr"));
	} else if (this.rel === "reset") {
		if (status_line !== null) status_line.innerHTML = "";
		if (moves_line !== null) moves_line.innerHTML = "0";
		if (score_line !== null) score_line.innerHTML = "0";
		
		transcript.innerHTML = "";
		moves = 0;
		score = {};
		visited = {};
	} else if (this.rel === "replace") {
		var clone = fetchFragment(target);
		while (clone.childNodes.length > 0)
			this.parentNode.insertBefore(clone.firstChild, this);
		this.parentNode.removeChild(this);
		return;
	} else {
		clearOneLink(this);
	}
	moves++;
	if (moves_line !== null)
		moves_line.innerText = moves;
	advanceStory(target);
}

// Micro-interpreter for a very simple template language.

var commands = {};

function runScripts(fragment) {
	var lines = fragment.innerHTML.split("\n");
	fragment.innerHTML = lines.map(substLine).join("\n");
}

function substLine(text) {
	var text2 = text.replace(/^\s*#(\S+)(.*)$/, substCall);
	return (text !== text2) ? text2 : substEval(text);
}

function substEval(text) {
	try {
		var subst = function (_, code) { return eval(code); };
		return text.replace(/{{(.*?)}}/g, subst);
	} catch (e) {
		console.error("Error in expression: " + text);
		console.error(e);
		return "";
	}
}

function substCall(line, name, args) {
	if (name in commands) {
		try {
			return commands[name](args);
		} catch (e) {
			console.error("Error in command: " + line);
			console.error(e);
			return "";
		}
	} else {
		return line;
	}
}

var _test;

commands.test = function (code) { _test = eval(code); return ""; };
commands.iftrue = function (code) { return _test ? substEval(code) : ""; };
commands.iffalse = function (code) { return _test ? "" : substEval(code); };

commands["do"] = function (code) { eval(code); return ""; };
commands["include"] = function (code) {	return include(eval(code)); };

function include(id) {
	var target = document.getElementById(id);
	if (target !== null) {
		return fetchFragment(target).outerHTML;
	} else {
		console.warn("Bad include: " + id);
		return "";
	}
}

commands.literal = function (code) { return (code); };

// Utility functions for use by authors in their scripts.

function inline(id) {
	var target = document.getElementById(id);
	if (target !== null) {
		return fetchFragment(target).innerHTML;
	} else {
		console.warn("Bad inline: " + id);
		return "";
	}
}

function and(a, b) { return a && b; };
function lt(a, b) { return a < b; };
function lte(a, b) { return a <= b; };
function gt(a, b) { return a > b; };
function gte(a, b) { return a >= b; };
</script>
